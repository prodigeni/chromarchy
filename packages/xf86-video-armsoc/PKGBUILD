# Maintainer: Thomas Sowell <tom@saxmachine.org>

buildarch=1

pkgname=xf86-video-armsoc
pkgdesc="Open-source X.org graphics driver for TI OMAP graphics"
pkgver=R25.3428
pkgrel=1
arch=('any')
url="http://git.chromium.org/gitweb/?p=chromiumos/third_party/xf86-video-armsoc.git;a=summary"
license=('custom')
_gitname='xf86-video-armsoc'
makedepends=('git' 'pkgconfig' 'xorg-server-devel' 'resourceproto' 'scrnsaverproto')

source=(xf86-video-armsoc-compat-X-1-14.patch
        "$_gitname::git+http://git.chromium.org/git/chromiumos/third_party/xf86-video-armsoc#branch=release-R25-3428.B")

md5sums=('2a435949d5ccd884406f51ee6127a8a6'
         'SKIP')

build() {
  cd "$srcdir/$_gitname"

  git apply "$srcdir/xf86-video-armsoc-compat-X-1-14.patch"

  sh autogen.sh
  ./configure --prefix=/usr
  make
}

package() {
  make -C "$srcdir/$_gitname" DESTDIR="$pkgdir/" install

  install -m 644 -D ${srcdir}/${_gitname}/COPYING ${pkgdir}/usr/share/licenses/${pkgname}/COPYING
}
